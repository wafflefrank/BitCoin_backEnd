<template>
  <!-- headerÈ°ØÁ§∫ -->
  <!-- ÊêúÂ∞ãÊ¨Ñ‰Ωç  ‰∏äÂçäÈÉ®ÂàÜ-->
  <div class="mb-4 withdraw_content bg-purple-dark">
    <!-- Ë≥áÊñôË°®ÂñÆ -->
    <el-form ref="searchForm" :model="searchOption" class="demo-ruleForm justify-content-between">
      <!-- Á¨¨‰∏ÄÂàó -->
      <el-row>
        <!-- Â∑¶ÂçäÈÇä -->
        <el-col :span="12" class="add_left_style_1">
          <!-- Êó•Êúü ü•ô-->
          <el-form-item label="Áî≥Ë´ãÊôÇÈñì" class="updateTime_style" prop="updateTime">
            <!-- <div class="block"> -->
            <!-- <span class="demonstration">Default</span> -->
            <el-date-picker
              v-model="searchOption.updateTime"
              type="datetimerange"
              range-separator="-"
              start-placeholder="Ëµ∑ÂßãÊôÇÈñì"
              end-placeholder="ÁµêÊùüÊôÇÈñì"
            />
            <!-- </div> -->
          </el-form-item>
        </el-col>
        <!-- Âè≥ÂçäÈÇä -->
        <el-col :span="12" class="add_left_style_1">
          <!-- ÊôÇÂçÄ üßÄ -->
          <el-form-item label="ÊôÇÂçÄ" class="updateTime_style me-2" prop="tagName">
            <el-select
              v-model="searchOption.timeZone"
              placeholder="ÈÅ∏ÊìáÊôÇÂçÄ..."
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- Âπ£Âà• üßÄ -->
          <el-form-item label="Âπ£Âà•" class="updateTime_style me-2" prop="tagName">
            <el-select
              v-model="searchOption.tagName"
              placeholder="Âπ£Âà•"
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
        </el-col>
      </el-row>
      <!-- Á¨¨‰∫åÂàó -->
      <el-row>
        <!-- Â∑¶ÂçäÈÇä -->
        <el-col :span="12" class="add_left_style_1">
          <!-- ÊêúÂ∞ã ü•ô-->
          <el-form-item label="ÊêúÂ∞ã" class="updateTime_style me-2" prop="search">
            <el-select
              v-model="searchOption.search"
              placeholder="ÈÅ∏ÊìáÊôÇÂçÄ..."
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- Á≤æÊ∫ñÊêúÂ∞ã -->
          <el-form-item class="me-2 updateTime_style">
            <el-select
              v-model="searchOption.search"
              placeholder="Á≤æÊ∫ñÊêúÂ∞ã"
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <el-form-item class="input_disable_style">
            <el-input disabled v-model="searchOption.tagName"></el-input>
          </el-form-item>
        </el-col>
        <!-- Âè≥ÂçäÈÇä -->
        <el-col :span="12" class="add_left_style_1">
          <!-- ÊèêÊ¨æÈáëÈ°ç üßÄ -->
          <el-form-item label="ÊèêÊ¨æÈáëÈ°ç" class="updateTime_style me-2" prop="tagName">
            <el-select
              v-model="searchOption.timeZone"
              placeholder="ÈÅ∏ÊìáÊôÇÂçÄ..."
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- Âπ£Âà• üßÄ -->
          <el-form-item class="updateTime_style me-2" prop="tagName">
            <el-select
              v-model="searchOption.tagName"
              placeholder="Âπ£Âà•"
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- ÂèñÊ¨æÂñÆËôü -->
          <el-form-item label="ÂèñÊ¨æÂñÆËôü" class="input_disable_style">
            <el-input disabled v-model="searchOption.tagName"></el-input>
          </el-form-item>
        </el-col>
      </el-row>
      <!-- Á¨¨‰∏âÂàó -->
      <el-row>
        <!-- Â∑¶ÂçäÈÇä -->
        <el-col :span="12" class="add_left_style_1">
          <!-- ÁãÄÊÖã ü•ô-->
          <el-form-item label="ÁãÄÊÖã" class="updateTime_style me-2" prop="search">
            <el-select
              v-model="searchOption.search"
              placeholder="ÂÖ®ÈÉ®..."
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- ÊèêÊ¨æÊñπÂºè -->
          <el-form-item label="ÊèêÊ¨æÊñπÂºè" class="me-2 updateTime_style">
            <el-select
              v-model="searchOption.search"
              placeholder="Á≤æÊ∫ñÊêúÂ∞ã"
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- ÊòØÂê¶Êúâ‰ª£ÁêÜ‰∏äÁ∑ö -->
          <el-form-item label="ÊòØÂê¶Êúâ‰ª£ÁêÜ‰∏äÁ∑ö" class="me-2 updateTime_style">
            <el-select
              v-model="searchOption.search"
              placeholder="Á≤æÊ∫ñÊêúÂ∞ã"
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
        </el-col>
        <!-- Âè≥ÂçäÈÇä -->
        <el-col :span="12" class="add_left_style_1">
          <!-- Áé©ÂÆ∂ÁµÑÂà•Â±§Á¥ö üßÄ -->
          <el-form-item label="Áé©ÂÆ∂ÁµÑÂà•Â±§Á¥ö" class="updateTime_style me-2" prop="tagName">
            <el-select
              v-model="searchOption.timeZone"
              placeholder="ÈÅ∏ÊìáÊôÇÂçÄ..."
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
          <!-- Âπ£Âà• üßÄ -->
          <el-form-item class="updateTime_style me-2" prop="tagName">
            <el-select
              v-model="searchOption.tagName"
              placeholder="Âπ£Âà•"
              @change="chooseTagsName(searchOption.tagName)"
            >
              <el-option
                v-for="item in searchOption.tagNameOptions"
                :key="item.id"
                :label="item.title"
                :value="item"
              ></el-option>
            </el-select>
          </el-form-item>
        </el-col>
      </el-row>
      <div class="text-center justify-content-between mt-3">
        <button type="button" class="btn btn-secondary" @click.prevent="resetForm()">ÈáçÁΩÆ</button>
        <el-button class="editBtn ms-4" size="large" @click="imtScreen()">
          <el-icon class="Search fs-4"> <Search></Search></el-icon>
          ÊêúÂ∞ã
        </el-button>
      </div>
    </el-form>
  </div>

  <!-- ÊèêÊ¨æÁ¥ÄÈåÑ ‰∏ãÂçäÈÉ®‰ªΩ -->
  <h5 class="text-start mb-4 ms-2 mustType text-dark">ÊèêÊ¨æÁ¥ÄÈåÑ</h5>
  <el-table
    ref="withdrawTable"
    :data="withdrawList.withdrawTable"
    style="width: 100%"
    :header-cell-class-name="classNameFunc"
    class="tags_table_style"
  >
    <el-table-column label="ÊúÉÂì°Ë®äÊÅØ">
      <el-table-column prop="id" label="#" align="center" width="50" />
      <el-table-column prop="Createtime" width="110" label="Áî≥Ë´ãÊôÇÈñì" sortable align="center">
      </el-table-column>
      <el-table-column prop="agency_team" label="‰ª£ÁêÜ(Ëàä)" align="center" />
      <el-table-column prop="hierarchy" label="‰ª£ÁêÜÂúòÈöä" align="center">
        <template v-slot="{ row }">
          <el-tag :type="row.hierarchy === 'D_group' ? 'success' : 'danger'">
            {{ row.hierarchy }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="Createuser" width="90" label="Áé©ÂÆ∂ÁµÑÂà• Áé©ÂÆ∂Â±§Á¥ö" align="center" />
      <el-table-column prop="account" width="90" label="ÊúÉÂì°Â∏≥Ëôü ÁúüÂØ¶ÂßìÂêç" align="center" />
      <el-table-column prop="tags" label="Ê®ôÁ±§ÂêçÁ®±" align="center" />
      <el-table-column prop="bank" label="ÈäÄË°åË≥áÊñô" width="120" align="center"> </el-table-column>
    </el-table-column>
    <el-table-column label="ÊèêÊ¨æË®äÊÅØ" align="center"
      ><el-table-column
        sortable
        width="110"
        prop="withdraw_amount"
        label="ÊèêÊ¨æÈáëÈ°ç"
        align="center"
      />
      <el-table-column prop="status" label="Á®ΩÊ†∏" align="center"> </el-table-column>
      <el-table-column prop="bonus_status" width="90" label="ÂÑ™ÊÉ†Á®ΩÊ†∏ Â∏∏ÊÖãÁ®ΩÊ†∏" align="center" />
      <el-table-column sortable width="110" prop="actual_amount" label="Âá∫Ê¨æÈáëÈ°ç" align="center">
      </el-table-column>
      <el-table-column prop="actual_amount" label="Â∏≥Êà∂È§òÈ°ç" align="center" />
      <el-table-column prop="actual_amount" label="ÊèêÊ¨æÊñπÂºè ÂØ¶ÈöõÊîØ‰ªò" width="90" align="center" />
    </el-table-column>
    <el-table-column label="Êìç‰Ωú" align="center"
      ><el-table-column prop="risk" label="È¢®ÊéßÂØ©Ê†∏" align="center">
        <template v-slot="{ row }">
          <el-tag :type="row.risk === 'V' ? 'success' : 'danger'">
            {{ row.risk }}
          </el-tag>
        </template>
      </el-table-column>
      <el-table-column prop="withdraw_way" label="Ë≤°ÂãôÊìç‰Ωú" align="center"> </el-table-column>
      <el-table-column prop="ip" label="ÂâçÂè∞ÂÇôË®ª" align="center" />
      <el-table-column prop="actual_amount" label="ÊèêÊ¨æÊìç‰ΩúÁ¥ÄÈåÑ" align="center">
      </el-table-column>
    </el-table-column>
  </el-table>
</template>

<script>
import _ from 'lodash';

export default {
  name: 'WithDraw_History',
  data() {
    return {
      // ‰∏äÊñπÊêúÂ∞ãÂçÄÈñì
      searchOption: {
        updateTime: '', // Êó•Êúü
        timeZone: '', // ÊôÇÂçÄ
        currency: '', // Âπ£Âà•
        search: '', // ÊêúÂ∞ãÊúÉÂì°Â∏≥Ëôü
        withdrawMoney: '', // ÊèêÊ¨æÈáëÈ°ç
        withdrawOrder: '', // ÂèñÊ¨æÂñÆËôü
        withdrawMethods: '', // ÂèñÊ¨æÊñπÂºè
        angencyOnline: '', // ÊòØÂê¶Êúâ‰ª£ÁêÜ‰∏äÁ∏£
        playerLevel: '', // Áé©ÂÆ∂ÁµÑÂà•Â±§Á¥ö
        player: '', // ËßíËâ≤
        withdrawTimes: '', // ÂèñÊ¨æÊ¨°Êï∏
        status: '', // ÁãÄÊÖã
        tagNameOptions: [], // Ê®ôÁ±§ÂêçÁ®±‰∏ãÊãâÈÅ∏È†Ö
        updateTimeOptions: [], // Êõ¥Êñ∞ÊôÇÈñì‰∏ãÊãâÈÅ∏È†Ö
      },
      //  ‰∏ãÊñπÊèêÊ¨æÁ¥ÄÈåÑ table
      withdrawList: {
        skip: '0', // Ë∑≥ÈÅéÂπæÁ≠Ü
        limit: '20', // ‰∏ÄÊ¨°ÂπæÁ≠Ü
        order: 'ASC', // IDÊéíÂ∫èÊñπÂºè(DESC , ASC )
        orderBy: 'id', // È§òÈ°çÊéíÂ∫è( Ëº∏ÂÖ•... money )
        withdrawTable: [],
      },
    };
  },
  methods: {
    // ÂèñÂæóÊèêÊ¨æÂàóË°®üç≥
    getWithdrawList() {
      this.isLoading = true;
      this.$http
        .get(
          `/backend/financ/withdrawList?skip=${this.withdrawList.skip}&limit=${this.withdrawList.limit}&order${this.withdrawList.order}&orderType`,
        )
        .then((res) => {
          this.isLoading = false;
          if (res.data.code === 200) {
            console.log(res.data.data);
            this.withdrawList.withdrawTable = res.data.data;
            _.forEach(this.withdrawList.withdrawTable, (item, key) => {
              console.log(item, key);
              console.log(item.Createtime);
              this.withdrawList.withdrawTable[key].Createtime = this.$filters.dateTime4(
                item.Createtime,
              );
              // this.rankHistory.tableData[key].Createtime = 'Ê∏¨Ë©¶';
            });
            console.log(this.withdrawList.withdrawTable);
          }
        });
    },
    // ÂÆ¢Ë£ΩÊ¨Ñ‰ΩçÊ®£Âºè
    classNameFunc({ rowIndex, columnIndex }) {
      console.log(rowIndex, columnIndex);
      if (
        (columnIndex === 0 && rowIndex === 0)
        || (columnIndex === 2 && rowIndex === 0)
        || (columnIndex === 4 && rowIndex === 0)
        || (columnIndex === 6 && rowIndex === 0)
        || (columnIndex === 8 && rowIndex === 0)
        || (columnIndex === 10 && rowIndex === 0)
      ) {
        return 'header_title_dark';
      }
      if (
        (rowIndex === 1 && columnIndex === 0)
        || (rowIndex === 1 && columnIndex === 1)
        || (rowIndex === 2 && columnIndex === 2)
      ) {
        return 'header_title_dark';
      }
      return 'header_title_light';
    },
  },
  created() {
    this.getWithdrawList();
  },
};
</script>

<style lang="scss">
.withdraw_content {
  padding: 25px 15px 25px;
  border-radius: 10px;
  flex-wrap: wrap;
  // min-height: 36px;
}
.bg-purple-dark {
  background: #eff3f8;
}
.add_left_style_1 {
  & .el-form-item {
    display: inline-block; //el-form-itemÁöÑÊ®ôÈ°åÈ°ØÁ§∫ÂÜçËº∏ÂÖ•Ê°Ü‰∏äÈù¢
    margin-bottom: 10px;
    text-align: left;
  }
}
.editBtn {
  background: #0b5ed7;
  color: #fff;
  &:hover {
    transition: 0.5s;
    background: #236aa5;
    color: #fff;
  }
}
.updateTime_style .el-input__inner {
  width: 100%;
  padding: 0 50px;
  border: 1px solid #dcdfe6;
  &:focus {
    border-color: #409eff !important;
  }
}
.input_disable_style .el-input.is-disabled .el-input__inner {
  width: 100%;
  padding: 0 50px;
  background: #f5f7fa;
  color: #c0c4cc;
  border: 1px solid #dcdfe6;
  &:focus {
    border-color: #409eff !important;
  }
}
.header_title_dark {
  background: #575656 !important;
  color: white;
  text-align: center !important;
}
.header_title_light {
  background: #888686 !important;
  color: white;
  text-align: center !important;
}
</style>
